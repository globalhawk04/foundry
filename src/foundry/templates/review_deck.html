<!-- FILE: src/foundry/templates/review_deck.html (FINAL, SIMPLIFIED VERSION) -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Foundry Correction Deck - Job #{{ job.id }}</title>
    <style>
        body { font-family: sans-serif; display: flex; gap: 20px; padding: 20px; background-color: #f4f4f9; }
        .panel { background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); padding: 20px; }
        .input-panel { flex: 1; } .form-panel { flex: 1.5; } .form-group { margin-bottom: 15px; } label { display: block; font-weight: bold; margin-bottom: 5px; color: #333; } input[type="text"], input[type="number"], input[type="date"] { width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; } .item-list-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 10px; } .item-row { display: grid; grid-template-columns: 3fr 1fr 1fr 1fr 0.5fr; gap: 10px; margin-bottom: 10px; } .item-row input { width: 90%; } button { padding: 8px 12px; border: none; border-radius: 4px; background-color: #007bff; color: white; cursor: pointer; } button.remove-btn { background-color: #dc3545; }
    </style>
</head>
<body>
    <div class="panel input-panel">
        <h2>Original Input</h2>
        {# This includes the _display_image.html partial #}
        {% include job.input_data.display_template %}
    </div>

    <div class="panel form-panel">
        <h2>Correction Form</h2>
        <form action="/save" method="POST">
            <!-- Hardcoded simple fields for clarity -->
            <div class="form-group">
                <label for="supplier_name">Supplier Name</label>
                <input type="text" name="supplier_name" value="{{ ai_output.get('supplier_name', '') }}">
            </div>
            <div class="form-group">
                <label for="invoice_number">Invoice Number</label>
                <input type="text" name="invoice_number" value="{{ ai_output.get('invoice_number', '') }}">
            </div>
            <div class="form-group">
                <label for="invoice_date">Invoice Date</label>
                <input type="text" name="invoice_date" value="{{ ai_output.get('invoice_date', '') }}">
            </div>

            <!-- Simplified loop for the inventory items -->
            <h3>Inventory Items</h3>
            <div id="container-inventory_items">
                {% for item in ai_output.get('inventory_items', []) %}
                <div class="item-row">
                    <input type="text" name="inventory_items_item_name[]" value="{{ item.get('item_name', '') }}">
                    <input type="number" step="any" name="inventory_items_total_quantity[]" value="{{ item.get('total_quantity', 0.0) }}">
                    <input type="text" name="inventory_items_total_unit[]" value="{{ item.get('total_unit', '') }}">
                    <input type="number" step="any" name="inventory_items_total_cost[]" value="{{ item.get('total_cost', 0.0) }}">
                    <button type="button" class="remove-btn" onclick="this.parentElement.remove()">X</button>
                </div>
                {% endfor %}
            </div>

            <button type="submit">Save Correction</button>
        </form>
    </div>
</body>
</html>